<div class="container mt-5">
  <h2 class="mb-4 text-center">Admin Panel - Event Management</h2>

  <button class="btn btn-success mb-3" (click)="showAddForm = !showAddForm">
    {{ showAddForm ? 'Hide Form' : 'Add New Event' }}
  </button>

  <!-- Add/Edit Form -->
  <form *ngIf="showAddForm" (ngSubmit)="onSubmit()" [formGroup]="eventForm" class="mb-4">
    <div class="row g-2">
      <div class="col-md-6">
        <input type="text" class="form-control" placeholder="Name" formControlName="name" required />
      </div>
      <div class="col-md-6">
        <input type="text" class="form-control" placeholder="Category" formControlName="category" required />
      </div>
      <div class="col-md-4">
        <input type="text" class="form-control" placeholder="Date" formControlName="date" required />
      </div>
      <div class="col-md-4">
        <input type="text" class="form-control" placeholder="Time" formControlName="time" required />
      </div>
      <div class="col-md-4">
        <input type="text" class="form-control" placeholder="Venue" formControlName="venue" required />
      </div>
      <div class="col-md-4">
        <input type="number" class="form-control" placeholder="Price" formControlName="price" />
      </div>
      <div class="col-md-4">
        <input type="number" class="form-control" placeholder="Tickets" formControlName="tickets" />
      </div>
      <div class="col-md-4">
        <input type="text" class="form-control" placeholder="Image URL" formControlName="image" />
      </div>
      <div class="col-md-12">
        <textarea class="form-control" placeholder="Description" formControlName="description" rows="2"></textarea>
      </div>
      <div class="col-md-12">
        <input type="text" class="form-control" placeholder="Google Map Location URL" formControlName="locationUrl" />
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-3 w-100">
      {{ editingEventId ? 'Update Event' : 'Add Event' }}
    </button>
  </form>

  <!-- Events Table -->
  <table class="table table-bordered table-hover" *ngIf="events.length > 0">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Category</th>
        <th>Date</th>
        <th>Venue</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let event of events">
        <td>{{ event.name }}</td>
        <td>{{ event.category }}</td>
        <td>{{ event.date }}</td>
        <td>{{ event.venue }}</td>
        <td>
          <button class="btn btn-sm btn-info me-2" (click)="editEvent(event)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteEvent(event.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="container mt-5">
  <h2 class="mb-4 text-center">ðŸ“‹ Booking Records</h2>

  <table class="table table-striped table-bordered text-center">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Event ID</th>
        <th>Event Name</th>
        <th>Booked At</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let booking of bookings">
        <td>{{ booking.userName }}</td>
        <td>{{ booking.userEmail }}</td>
        <td>{{ booking.eventId }}</td>
        <td>{{ booking.eventName }}</td>
        <td>{{ booking.bookedAt | date: 'medium' }}</td>
      </tr>
    </tbody>
  </table>
</div>


  <p *ngIf="events.length === 0">No events found.</p>
</div>
